<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <%= stylesheet_link_tag    "application" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

			
			<% if signed_in? %>

			<div class="container_12">
			<div class="grid_12">

			<%= render 'layouts/header' %>				

			<div id="middle" class="middle_content">

					<div id="left_sidebar" class="grid_2 alpha">
						<%= render 'layouts/left_sidebar' %>
					</div>
			
					<div id="middle_content" class="grid_8 alpha omega">
						<div class="content_view">
							<% flash.each do |key, value| %>
								<div class="flash <%= key %>"><%= value %></div>
							<% end %>
			
							<%= yield %>
						</div>
					</div>
					
					<div id="right_sidebar" class="grid_2 omega">
						<%= render 'layouts/right_sidebar' %>
					</div>

			</div>		
		
				<%= render 'layouts/footer' %>

				<div class="grid_12 alpha omega">			
					<div class="debug">
						<%= debug(params) if Rails.env.development? %>	
					</div>
				</div>
			</div>
			</div>
			
			<% else %>
				<div class="content_view">
					
					<%= yield %>
					<% flash.each do |key, value| %>
						<div class="flash <%= key %>"><%= value %></div>
					<% end %>
				
					<%= render 'layouts/footer' %>

					<div class="grid_12 alpha omega">			
						<div class="debug">
							<%= debug(params) if Rails.env.development? %>	
						</div>
					</div>
				
				</div>
				
			<% end %>
			
		

<script type="text/javascript">

/**********************************************************************
The javascript in this application file provides an interactive toolbar
module, whereby the user can interact with the toolbars in all views.
**********************************************************************/

/**********************************************************************
toolbar_config function: takes left and right sidebar parameters to set the 
widths of the left and right toolbars, and the middle content
**********************************************************************/
function toolbar_config(left, right){
	
	$('#left_sidebar').removeClass("hidden");
	$('#right_sidebar').removeClass("hidden");	
	$('#middle_content').removeClass("hidden");
	
	//left toolbar
	for (var i = 1; i <= 12; i++) {
		if (i == left) continue;
		grid_left = "grid_" + i.toString();
		$('#left_sidebar').removeClass(grid_left);
	}
	
	if (left == 0) {
		$('#left_sidebar').addClass("hidden");
	} else {
	grid_left = "grid_" + left.toString();
		$('#left_sidebar').addClass(grid_left);
	}
		
	//right toolbar
	for (var i = 1; i <= 12; i++) {
		if (i == right) continue;
		grid_right = "grid_" + i.toString();
		$('#right_sidebar').removeClass(grid_right);
	}
	
	if (right == 0) {
		$('#right_sidebar').addClass("hidden");
	} else {
	grid_right = "grid_" + right.toString();
		$('#right_sidebar').addClass(grid_right);
	}
	
	//middle content
	middle = 12 - (left + right);
	//right toolbar
	for (var i = 1; i <= 12; i++) {
		if (i == middle) continue;
		grid_middle = "grid_" + i.toString();
		$('#middle_content').removeClass(grid_middle);
	}
	
	if (middle == 0) {
		$('#middle_content').addClass("hidden");
	} else {
	grid_middle = "grid_" + middle.toString();
		$('#middle_content').addClass(grid_middle);
	}
	
};

/**********************************************************************
toolbar_toggle and appointment_toggle functions: toggle the left and 
right sidebars, respectively, and restructure the page using the 
default sidebar parameters and calling the toolbar_config function
**********************************************************************/
function toolbar_toggle(left, right) {
	
	left_toggle = false;
	if ( (left != 0) && $('#left_sidebar').hasClass("hidden")) {
		left_toggle = true;	
	}
	right_toggle = false;
	if ( (right != 0) && $('#right_sidebar').hasClass("hidden")) {
		right_toggle = true;	
	}	
	
	
	if (left_toggle == true) {
		if (right_toggle == true) {
			toolbar_config(left, 0);
		}else{
			toolbar_config(left, right);
		}
		$("#toolbar_arrow").html('&#8592&#8592');		
	}else{		
		if (right_toggle == true) {
			toolbar_config(0, 0);
		}else{			
			toolbar_config(0, right);		
		}
		$("#toolbar_arrow").html('&#8594&#8594');
	}	
	

}
function appointment_toggle(left, right) {
	
	left_toggle = false;
	if ( (left != 0) && $('#left_sidebar').hasClass("hidden")) {
		left_toggle = true;	
	}
	right_toggle = false;
	if ( (right != 0) && $('#right_sidebar').hasClass("hidden")) {
		right_toggle = true;	
	}
	
	if (right_toggle == true) {
		if (left_toggle == true){
			toolbar_config(0, right);
		}else{
			toolbar_config(left, right);
		}
		$("#schedule_arrow").html('&#8594&#8594');
	}else{
		right_toggle = true;
		if (left_toggle == true){
			toolbar_config(0, 0);
		}else{
			toolbar_config(left, 0);
		}
		$("#schedule_arrow").html('&#8592&#8592');		
	}

}


</script>


</body>

</html>
